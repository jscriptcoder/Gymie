<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>gymie</title>
	<meta name="description" content="Documentation for gymie">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">gymie</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>gymie</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#gymie---client" id="gymie---client" style="color: inherit; text-decoration: none;">
					<h1>Gymie - Client</h1>
				</a>
				<p><a href="https://www.npmjs.com/package/gymie"><img alt="npm" src="https://img.shields.io/npm/v/gymie?label=NPM%20Package" /></a>
				<a href="https://pypi.org/project/gymie/"><img alt="PyPI" src="https://img.shields.io/pypi/v/gymie?label=PyPI%3A%20Gymie%20Server" /></a></p>
				<p align="center">
					<img src="https://raw.githubusercontent.com/jscriptcoder/Gymie-Client/master/resources/Gymie-logo.svg" width="200" />
				</p>
				<p>WebSocket client that consumes an API wrapping <a href="https://github.com/openai/gym">OpenAI Gym</a> or Gym-like environments such as <a href="https://github.com/openai/retro">Gym Retro</a> or <a href="https://github.com/Unity-Technologies/ml-agents">Unity ML-Agents</a>. Currently the best server is its counterpart <a href="https://github.com/jscriptcoder/Gymie-Server">Gymie-Server</a> ðŸ˜‰</p>
				<a href="#content-of-this-document" id="content-of-this-document" style="color: inherit; text-decoration: none;">
					<h2>Content of this document</h2>
				</a>
				<ul>
					<li><a href="#installation">Installation</a></li>
					<li><a href="#how-to-run-the-client-and-server">How to run the client</a></li>
					<li><a href="#api-and-how-to-use-it">API and how to use it</a></li>
					<li><a href="#testing-gymie">Testing Gymie</a></li>
					<li><a href="#license">Licence</a></li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<p>Gymie-Client is available as a <a href="https://www.npmjs.com/package/gymie">NPM package</a>, and can installed as a dependency as usual:</p>
				<pre><code>$ npm <span class="hljs-keyword">install</span> gymie</code></pre>
				<p>You can also clone the repo and npm-link the library as follows, although there isn&#39;t really a good readon to do it this way, unless you wanna contribute to the library and test it locally.</p>
				<pre><code>$ git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/jscriptcoder/</span>Gymie-Client
Cloning into <span class="hljs-string">&#x27;Gymie-Client&#x27;</span>...
...

$ cd Gymie-Client/
$ npm link
gymie@<span class="hljs-number">0</span>.x.y preinstall <span class="hljs-regexp">/path/</span>to/Gymie-Client
...

$ cd ~<span class="hljs-regexp">/path/</span>to/project
$ npm link gymie
<span class="hljs-regexp">/path/</span>to<span class="hljs-regexp">/project/</span>node_modules<span class="hljs-regexp">/gymie -&gt; /u</span>sr<span class="hljs-regexp">/local/</span>lib<span class="hljs-regexp">/node_modules/gymi</span>e -&gt; <span class="hljs-regexp">/path/</span>to/Gymie-Client</code></pre>
				<p>During the installation <a href="https://pypi.org/project/gymie/">Gymie-Server</a> will also be installed. It&#39;s important to note that Gymie-Server requires Python&gt;=3.6, so I suggest to conda-create an environment with such version if it&#39;s not already installed... or upgrade Python to at least this version.</p>
				<a href="#how-to-run-the-client-and-server" id="how-to-run-the-client-and-server" style="color: inherit; text-decoration: none;">
					<h2>How to run the client (and server)</h2>
				</a>
				<p>Gymie-Client communicates with a server through WebSockets. This server will provide Gymie with an API to access the underlying Python library to create and interact with an environment. As mentioned before, this client comes with its <a href="https://github.com/jscriptcoder/Gymie-Server">counterpart server</a>. You can start the server from the command line:</p>
				<pre><code>$ python -m gymie --host <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> --port <span class="hljs-number">5000</span>
(<span class="hljs-number">84581</span>) wsgi starting up on http:<span class="hljs-comment">//0.0.0.0:5000</span></code></pre>
				<p>Once the server is running, Gymie-Client can start interacting with it as follows:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> Gymie <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gymie&#x27;</span>

<span class="hljs-keyword">const</span> gymie = <span class="hljs-keyword">new</span> Gymie()
<span class="hljs-keyword">await</span> gymie.connect(<span class="hljs-string">&#x27;http://0.0.0.0:5000&#x27;</span>) <span class="hljs-comment">// connects to the server</span>

<span class="hljs-keyword">const</span> env = <span class="hljs-keyword">await</span> gymie.make(<span class="hljs-string">&#x27;LunarLander-v2&#x27;</span>) <span class="hljs-comment">// instantiates an environment</span>

<span class="hljs-comment">// accesing the underlying Gym-like library.</span>
<span class="hljs-keyword">const</span> space = <span class="hljs-keyword">await</span> env.actionSpace()
<span class="hljs-keyword">const</span> initialState = <span class="hljs-keyword">await</span> env.reset()
<span class="hljs-keyword">const</span> randomAction = <span class="hljs-keyword">await</span> env.actionSample()</code></pre>
				<a href="#api-and-how-to-use-it" id="api-and-how-to-use-it" style="color: inherit; text-decoration: none;">
					<h2>API and how to use it</h2>
				</a>
				<p>Complete API documentation can be found here: <a href="https://jscriptcoder.github.io/Gymie-Client">Gymie-Client API</a> <sub>(generated by <a href="http://typedoc.org/">TypeDoc</a>)</sub></p>
				<p>In the <a href="#how-to-run-the-client-and-server">previous section</a> we already saw how to import gymie, connect to the server, instantiate an environment and call a few API methods. Let&#39;s go a bit more in detail with a complete example of a random agent interacting with an environment:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> Gymie  <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../dist&#x27;</span>
<span class="hljs-keyword">import</span> { Continuous, Discrete } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../dist/Env&#x27;</span>
<span class="hljs-keyword">import</span> { 
  ConnectFailed, 
  NoConnected, 
  ConnectionError, 
  ConnectionClosed 
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../dist/errors&#x27;</span>

<span class="hljs-keyword">const</span> wsApi = <span class="hljs-string">&#x27;http://0.0.0.0:5000/gym&#x27;</span>
<span class="hljs-keyword">const</span> envId = <span class="hljs-string">&#x27;LunarLander-v2&#x27;</span>
<span class="hljs-keyword">const</span> { log } = <span class="hljs-built_in">console</span>

;(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> gymie = <span class="hljs-keyword">new</span> Gymie()

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Connects to the server</span>
    <span class="hljs-keyword">await</span> gymie.connect(wsApi)

    <span class="hljs-comment">// Instantiates the environment, in this case it&#x27;s got</span>
    <span class="hljs-comment">// a continuous state and discrete action space.</span>
    <span class="hljs-keyword">const</span> env = <span class="hljs-keyword">await</span> gymie.make&lt;Continuous, Discrete&gt;(envId)
    <span class="hljs-keyword">const</span> space = <span class="hljs-keyword">await</span> env.actionSpace()
    log(<span class="hljs-string">&#x27;Action Space:&#x27;</span>, space) <span class="hljs-comment">// =&gt; Action Space: { name: &#x27;Discrete&#x27;, n: number }</span>

    <span class="hljs-keyword">const</span> initialState = <span class="hljs-keyword">await</span> env.reset()
    log(<span class="hljs-string">&#x27;Initial State:\n&#x27;</span>, initialState) <span class="hljs-comment">// =&gt; Initial State: number[]</span>

    <span class="hljs-keyword">let</span> step = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> totalReward = <span class="hljs-number">0</span>

    <span class="hljs-comment">// Running loop: runs an episode until `done = true`</span>
    log(<span class="hljs-string">&#x27;---- START episode ----&#x27;</span>)
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

      log(<span class="hljs-string">`\nStep: <span class="hljs-subst">${++step}</span>`</span>)

      <span class="hljs-comment">// Samples a random action</span>
      <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">await</span> env.actionSample()
      log(<span class="hljs-string">&#x27;Action:&#x27;</span>, action)  <span class="hljs-comment">// =&gt; Action: number from [0..n)</span>

      <span class="hljs-comment">// Performs a step on the environment given the action</span>
      <span class="hljs-keyword">const</span> [nextState, reward, done, _] = <span class="hljs-keyword">await</span> env.step(action)

      log(<span class="hljs-string">&#x27;Next State:\n&#x27;</span>, nextState) <span class="hljs-comment">// =&gt; Next State: number[]</span>
      log(<span class="hljs-string">`Reward: <span class="hljs-subst">${reward}</span>`</span>) <span class="hljs-comment">// =&gt; Next State: number</span>

      totalReward += reward

      <span class="hljs-keyword">if</span> (done) {
        log(<span class="hljs-string">&#x27;---- END episode ----&#x27;</span>)
        <span class="hljs-keyword">break</span>
      }
    }

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`\nEpisode Reward: <span class="hljs-subst">${totalReward}</span>\n`</span>)

    <span class="hljs-keyword">await</span> env.close()

  } <span class="hljs-keyword">catch</span>(err) {
    <span class="hljs-keyword">switch</span>(<span class="hljs-literal">true</span>) {
      <span class="hljs-comment">//Â This could happen while trying to connect to the server</span>
      <span class="hljs-keyword">case</span> err <span class="hljs-keyword">instanceof</span> ConnectFailed: <span class="hljs-keyword">break</span>

      <span class="hljs-comment">// There is no connection and we try to instantiate an environment    </span>
      <span class="hljs-keyword">case</span> err <span class="hljs-keyword">instanceof</span> NoConnected: <span class="hljs-keyword">break</span>

      <span class="hljs-comment">// There was a socket error</span>
      <span class="hljs-keyword">case</span> err <span class="hljs-keyword">instanceof</span> ConnectionError: <span class="hljs-keyword">break</span>

      <span class="hljs-comment">// Server closed the connection. Code and reason comes in the message</span>
      <span class="hljs-keyword">case</span> err <span class="hljs-keyword">instanceof</span> ConnectionClosed: <span class="hljs-keyword">break</span>
    }
  } <span class="hljs-keyword">finally</span> {
    gymie.close()
  }
})()</code></pre>
				<a href="#testing-gymie" id="testing-gymie" style="color: inherit; text-decoration: none;">
					<h2>Testing Gymie</h2>
				</a>
				<p>All unit-tests live next to the code they&#39;re testing, under the extension <code>src/*.test.ts</code>. You can run all the tests by executing:</p>
				<pre><code><span class="hljs-meta">$</span><span class="bash"> npm <span class="hljs-built_in">test</span></span></code></pre>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p><a href="LICENSE">MIT License</a> - Copyright (c) 2020 Francisco Ramos</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/commander.html" class="tsd-kind-icon">Commander</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/connectfailed.html" class="tsd-kind-icon">Connect<wbr>Failed</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/connectionclosed.html" class="tsd-kind-icon">Connection<wbr>Closed</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/connectionerror.html" class="tsd-kind-icon">Connection<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/deferred.html" class="tsd-kind-icon">Deferred</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/env.html" class="tsd-kind-icon">Env</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gymie.html" class="tsd-kind-icon">Gymie</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/noconnected.html" class="tsd-kind-icon">No<wbr>Connected</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/requester.html" class="tsd-kind-icon">Requester</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/command.html" class="tsd-kind-icon">Command</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/continuous.html" class="tsd-kind-icon">Continuous</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/discrete.html" class="tsd-kind-icon">Discrete</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/multibinary.html" class="tsd-kind-icon">Multi<wbr>Binary</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/space.html" class="tsd-kind-icon">Space</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#action" class="tsd-kind-icon">Action</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#dict" class="tsd-kind-icon">Dict</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#done" class="tsd-kind-icon">Done</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#info" class="tsd-kind-icon">Info</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#promisereject" class="tsd-kind-icon">Promise<wbr>Reject</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#promiseresolve" class="tsd-kind-icon">Promise<wbr>Resolve</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#reward" class="tsd-kind-icon">Reward</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#sender" class="tsd-kind-icon">Sender</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#state" class="tsd-kind-icon">State</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#step" class="tsd-kind-icon">Step</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#noop" class="tsd-kind-icon">noop</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#tostr" class="tsd-kind-icon">to<wbr>Str</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter">
						<a href="globals.html#tovalue" class="tsd-kind-icon">to<wbr>Value</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>